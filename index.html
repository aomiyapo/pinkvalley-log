<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pink Valley Panic Log</title>
<style>
body {
  margin:0;
  padding:0;
  font-family: monospace;
  background:black;
  overflow:hidden;
}
#log {
  position:relative;
  height:100vh;
  overflow-y:auto;
}
.line {
  display:block;
  margin:2px 0;
  white-space: pre;
  opacity:0;
  transition: opacity 0.1s;
}
.line.error {
  color:#ff1493;
  font-weight:bold;
}
.line.critical {
  color:#ff0000;
  font-weight:bold;
}
.char {
  display:inline-block;
  transition: color 0.2s;
}
</style>
</head>
<body>
<div id="log"></div>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const logDiv = document.getElementById('log');
  const totalLines = 1000; // для теста, потом можно 10000
  const flyingLines = [];
  let i=0;
  let failurePhase=false;
  let panicMode=false;
  const errorBlocks=[5,7,4,6];
  let currentBlock=0;
  let blockLinesLeft=0;
  let inBlock=false;

  function updatePanic(){
    flyingLines.forEach(obj=>{
      // хаотичное движение
      obj.el.style.left = parseFloat(obj.el.style.left||0) + obj.speedX + 'px';
      obj.el.style.top = parseFloat(obj.el.style.top||0) + obj.speedY + 'px';
      obj.el.style.transform = `rotate(${Math.random()*360-180}deg)`;

      // границы экрана
      if(parseFloat(obj.el.style.left)<0) obj.el.style.left='0px';
      if(parseFloat(obj.el.style.left)>window.innerWidth-200) obj.el.style.left=(window.innerWidth-200)+'px';
      if(parseFloat(obj.el.style.top)<0) obj.el.style.top='0px';
      if(parseFloat(obj.el.style.top)>window.innerHeight-20) obj.el.style.top=(window.innerHeight-20)+'px';

      // мигание букв
      const chars = obj.el.querySelectorAll('.char');
      chars.forEach(c=>{
        if(Math.random()<0.1){
          c.style.color = ['#ff69b4','#ff1493','#ffb6c1'][Math.floor(Math.random()*3)];
        }
      });
    });
    requestAnimationFrame(updatePanic);
  }

  function showLine(){
    if(i>=totalLines) return;

    const lineEl = document.createElement('div');
    lineEl.className='line';
    let text, isError=false;

    // старт блока ошибок на 700-й строке
    if(i===700){
      failurePhase=true;
      inBlock=true;
      blockLinesLeft=errorBlocks[0];
      currentBlock=0;
    }

    // блок ошибок
    if(failurePhase && inBlock && currentBlock<errorBlocks.length){
      text = `|~CRITICAL_SYSTEM_FAILURE : CODE_${Math.floor(Math.random()*9999)}~|`;
      lineEl.classList.add('critical');
      isError=true;
      blockLinesLeft--;
      if(blockLinesLeft<=0){
        inBlock=false;
        currentBlock++;
        if(currentBlock<errorBlocks.length){
          blockLinesLeft = errorBlocks[currentBlock];
        } else {
          panicMode=true;
        }
      }
    } else {
      // случайные ошибки
      if(Math.random()<0.05){
        text = `|~CRITICAL_SYSTEM_FAILURE : CODE_${Math.floor(Math.random()*9999)}~|`;
        lineEl.classList.add('critical');
        isError=true;
      } else if(Math.random()<0.2){
        text = `|~ERROR_UNKNOWN : CODE_${Math.floor(Math.random()*999)}~|`;
        lineEl.classList.add('error');
        isError=true;
      } else {
        text = `|~SYSTEM_LOG_ENTRY_${i} : ACTIVE~|`;
      }
    }

    // делим на span для мигания
    lineEl.innerHTML = text.split('').map(c=>`<span class="char">${c}</span>`).join('');

    if(panicMode){
      lineEl.style.position="absolute";
      lineEl.style.left = Math.random()*(window.innerWidth-200)+'px';
      lineEl.style.top = Math.random()*(window.innerHeight-20)+'px';
      lineEl.speedX=(Math.random()-0.5)*4;
      lineEl.speedY=(Math.random()-0.5)*4;
      flyingLines.push({el:lineEl, speedX:lineEl.speedX, speedY:lineEl.speedY});
      updatePanic();
    }

    logDiv.appendChild(lineEl);
    setTimeout(()=>{lineEl.style.opacity=1;},5);

    // автоскролл до паники
    if(!panicMode) logDiv.scrollTop = logDiv.scrollHeight;

    i++;

    // хаотичная скорость печатки
    let delay;
    if(!panicMode){
      delay = 50 + Math.random()*50;
    } else {
      delay = 5 + Math.random()*100;
    }

    setTimeout(showLine, delay);
  }

  showLine();
});
</script>
</body>
</html>ыы